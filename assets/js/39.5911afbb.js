(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{449:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vite原理篇-0621"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vite原理篇-0621"}},[s._v("#")]),s._v(" Vite原理篇 0621")]),s._v(" "),t("blockquote",[t("p",[s._v("vite中实现的内容都是基于node的")])]),s._v(" "),t("h2",{attrs:{id:"在vite中处理css"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在vite中处理css"}},[s._v("#")]),s._v(" 在vite中处理css")]),s._v(" "),t("blockquote",[t("p",[s._v("vite 天生就支持对css文件的直接处理")])]),s._v(" "),t("p",[t("strong",[s._v("读取过程")])]),s._v(" "),t("ol",[t("li",[s._v("vite在读取到main.js中引用到了Index.css")]),s._v(" "),t("li",[s._v("直接去使用fs模块去读取index.css中文件内容")]),s._v(" "),t("li",[s._v("直接创建一个style标签，将index.css中文件内容直接copy进style标签里")]),s._v(" "),t("li",[s._v("将style标签插入到index.html的head中")]),s._v(" "),t("li",[s._v("将该css文件中的内容直接替换为js脚本（为了方便热更新或者css模块化），同时设置content-type为js从而让浏览器以JS脚本的形式来执行该css后缀的文件")])]),s._v(" "),t("p",[s._v("最终可能会导致样式被覆盖（因为类名重复），这就是我们在协同开发的时候很容易出现的问题")]),s._v(" "),t("p",[s._v("使用cssmodule来解决这个问题")]),s._v(" "),t("p",[t("strong",[s._v("处理过程")])]),s._v(" "),t("ol",[t("li",[s._v("module.css（module是一种约定，表示需要开启css模块化）")]),s._v(" "),t("li",[s._v("它会将你的所有类名进行一定规则的替换（将footer替换为_footer_i22st_1）")]),s._v(" "),t("li",[s._v("同时创建一个映射对象"),t("code",[s._v('{footer: "_footer_i22st_1"}')])]),s._v(" "),t("li",[s._v("将替换过后的内容塞进style标签里然后放入到head标签中 (能够读到index,html的文件内容)")]),s._v(" "),t("li",[s._v("将componentA.module.css内容进行全部抹除，替换成JS脚本")]),s._v(" "),t("li",[s._v("将创建的映射对象在脚本中进行默认导出")])]),s._v(" "),t("h3",{attrs:{id:"vite-config-js中css配置-modules篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vite-config-js中css配置-modules篇"}},[s._v("#")]),s._v(" vite.config.js中css配置（modules篇）")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vite.config.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("css")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对css的行为进行配置")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("modules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是对css模块化的默认行为进行覆盖")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("localsConvention")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cameCase'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置转换类名（came-case => cameCase）")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("scopeBehaviour")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n            generateScopeName："),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name]-[local]-[hash:5]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("generateScopeName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" css")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// name: 代表的是你此刻的css文件中的类名")]),s._v("\n        \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// filename: 当前css文件的绝对路径")]),s._v("\n        \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// css： 当前样式")]),s._v("\n        \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置成函数后，返回值就决定了return他最终显示的类型")]),s._v("\n        \t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("hashPrefix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("， "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// hash前缀")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("globalModulePaths")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代表你不想参与到css模块化的路径")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("ul",[t("li",[s._v("localsConvention： 配置转换类名\n"),t("ul",[t("li",[s._v("cameCase：转换后添加驼峰")]),s._v(" "),t("li",[s._v("cameCaseOnly： 只有驼峰")]),s._v(" "),t("li",[s._v("dashes: 转化后添加中划线")]),s._v(" "),t("li",[s._v("dashesOnly: 只有中划线")])])]),s._v(" "),t("li",[s._v("scopeBehaviour: 配置当前的模块化行为是模块化还是全局化 (有hash就是开启了模块化的一个标志, 因为他可以保证产生不同的hash值来控制我们的样式类名不被覆盖)\n"),t("ul",[t("li",[s._v("local：开启（默认）")]),s._v(" "),t("li",[s._v("global：关闭")])])]),s._v(" "),t("li",[s._v("generateScopeName：")]),s._v(" "),t("li",[s._v("生成的类名的规则(可以配置为函数, 也可以配置成字符串规则: https://github.com/webpack/loader-utils#interpolatename)")]),s._v(" "),t("li",[s._v("hashPrefix: 生成hash会根据你的类名 + 一些其他的字符串(文件名 + 他内部随机生成一个字符串)去进行生成, 如果你想要你生成hash更加的独特一点, 你可以配置hashPrefix, 你配置的这个字符串会参与到最终的hash生成, （hash: 只要你的字符串有一个字不一样, 那么生成的hash就完全不一样, 但是只要你的字符串完全一样, 生成的hash就会一样）")]),s._v(" "),t("li",[s._v("globalModulePaths: 代表你不想参与到css模块化的路径")])]),s._v(" "),t("p",[t("strong",[s._v("less、sass等预处理器的处理")])]),s._v(" "),t("h3",{attrs:{id:"vite配置文件中css配置流程-preporcessoroptions篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vite配置文件中css配置流程-preporcessoroptions篇"}},[s._v("#")]),s._v(" vite配置文件中css配置流程（preporcessorOptions篇）")]),s._v(" "),t("blockquote",[t("p",[s._v("主要针对于配置一些css预处理器的一些全局参数")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vite.config.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("css")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对css的行为进行配置")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("modules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("preporcessorOptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// key-value key: 代表预处理的名less、sass")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("less")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 整个的配置对象都会最终给到less的执行参数（全局参数）中去")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在webpack里面就给less-loader配置")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("math")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'always'")]),s._v("，\n                "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("globalVars")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局变量")]),s._v("\n                \t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mainColor")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'red'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                \t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("fontSize")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'14px'")]),s._v("\n            \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devSourceMap")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开始css的sourceMap")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"sourcemap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sourcemap"}},[s._v("#")]),s._v(" sourceMap")]),s._v(" "),t("blockquote",[t("p",[s._v("文件之间的索引:")]),s._v(" "),t("p",[s._v("假设我们的代码被压缩或者被编译过了, 这个时候假设程序出错, 他将不会产生正确的错误位置信息 如果设置了sourceMap, 他就会有一个索引文件map")]),s._v(" "),t("p",[s._v("sourceMap解决的问题极其的微小, 但是他的实现过程非常的复杂")])]),s._v(" "),t("h3",{attrs:{id:"postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#postcss"}},[s._v("#")]),s._v(" postcss")]),s._v(" "),t("blockquote",[t("p",[s._v("保证css在执行起来是万无一失的")]),s._v(" "),t("p",[s._v("vite天生对postcss有非常良好的支持")]),s._v(" "),t("p",[s._v("类似于js中的babel的作用")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("将语法进行编译（嵌套、函数、变量）成原生css【这些less，sass都可以做】，所以postcss包含less/sass")])]),s._v(" "),t("li",[t("p",[s._v("对未来css属性的一些使用降级问题（解决一些浏览器兼容问题）")])]),s._v(" "),t("li",[t("p",[s._v("前缀补全：eg：--webkit")])])]),s._v(" "),t("h4",{attrs:{id:"使用postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用postcss"}},[s._v("#")]),s._v(" 使用postcss")]),s._v(" "),t("ol",[t("li",[s._v("安装依赖")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("npm install postcss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli postcss "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("书写描述文件")])]),s._v(" "),t("p",[s._v("postcss配置文件的格式")]),s._v(" "),t("ul",[t("li",[s._v("postcss.config.js")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安装插件“预设环境” npm install postcss-preset-env -D")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 预设环境里面是会包含很多的插件 postcss-preset-env")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// - 语法降级")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// - 编译插件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" postcssPresetEnv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-preset-env'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 预设会一次性把这些必要的插件都安装上")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("postcssPresetEnv")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* pluginOptions */")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("因为现在维护less和sass的困难，postcss已经不再维护相关插件了，所以现在业内产生了一个新的说法："),t("strong",[s._v("postcss是后处理器")])]),s._v(" "),t("h3",{attrs:{id:"vite配置文件中css配置流程-postcss篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vite配置文件中css配置流程-postcss篇"}},[s._v("#")]),s._v(" vite配置文件中css配置流程（postcss篇）")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vite.config.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("css")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对css的行为进行配置")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("modules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("preporcessorOptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devSourceMap")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开始css的sourceMap")]),s._v("\n        postcss： "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \t"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("postcssPresetEnv")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("strong",[s._v("在项目中可能会出现的问题")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("因为postcss是挨个挨个进行编译的，然后如果有两个公共less文件先后引入，当postcss解析完一个之后就结束了，不会解析第二个，所以解决办法就是")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("全局变量文件最好使用css命名")])]),s._v(" "),t("li",[t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("postcss： {\n        \tplugins: [\n        \t\tpostcssPresetEnv({\n        \t\t\timportFrom: path.resolve(__dirname, './common.css');\n        \t\t})\n        \t]\n    \t}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])])])]),s._v(" "),t("h2",{attrs:{id:"困难解决"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#困难解决"}},[s._v("#")]),s._v(" 困难解决")]),s._v(" "),t("p",[s._v("在和同事协同开发的过程中，在vite项目中，我写了一个样式，但是没有生效，结果发现是因为和另一个同事的类名重复了，结果导致他的样式覆盖了我的样式")]),s._v(" "),t("p",[s._v("解决办法：使用cssmodule来解决这个问题")]),s._v(" "),t("p",[s._v("学习到的内容：vite中如何处理css")]),s._v(" "),t("p",[s._v("自己做一个tab组件，tab切换的过程中，tab切换显示不同的内容，内容是使用的是同一个子组件只是参数不同，并且tab切换后改变某个data值，父组件里的变量会进行双向绑定，会实时改变（修改标题啥的），子组件中的传参也会改变，但是参数改变后子组件内容并没有发生改变，我进行排查后发现子组件接收的变量也发生了改变，就是组件没有进行刷新。")]),s._v(" "),t("p",[s._v("刚开始我的解决办法是将v-if变为v-show，因为v-show它会全部初始化，tab切换后直接让其显示就可以，处理后发现没用")]),s._v(" "),t("p",[s._v("结果我想到了局部刷新，利用vue内部的虚拟DOM，vue提供的key属性，vue中组件发现 :key发生变化就会重新渲染，利用这个机制来进行局部刷新")]),s._v(" "),t("p",[s._v("如果需要每次在当前父页面更新时重载某个组件就可以用这个方法，每次组件更新 :key 都会重新取值，而时间戳每次都是不同的，组件发现 :key发生变化就会重新渲染")]),s._v(" "),t("p",[s._v("vue中的key的作用主要是为了高效的更新dom, 它也可以用于强制替换元素/组件而不是重复使用它")]),s._v(" "),t("p",[s._v("学习到的内容：vue项目如何进行局部刷新")])])}),[],!1,null,null,null);t.default=e.exports}}]);